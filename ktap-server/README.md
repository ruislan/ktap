# 说明

这是一个纯个人兴趣爱好做的项目，所以会有一些解决方案会很随意。不过本项目是典型的读多写少且大部分都只需要最终一致性的场景，所以后续如果出现性能问题，可以从异步、缓存、读写分离、索引等方向优化。

## 关于JWT

通常我们直接返回Token，然后客户端存储在本地，然后每次请求都带上Token。
这里我们采用将Token存储到Cookie中，客户端本身上传是会带有Cookie的，所以可以直接处理。（如果涉及跨域，注意Cookie的跨域问题）

关于到底是存储到Cookie还是localStorage中，可以自行搜索查看各自的优劣。

## 关于Timeline的设计

明确一点的是，本项目不是推特，不会在自己的页面看到所有关注的人的动态，而只是单纯的在某个用户的个人中心看到其动态即可。所以为了简单，就直接用sqlite来存储所有人的timeline。这其实是典型的读多写少，且读取也是按照时间顺序或者倒叙的情况。所以后续优化的方向可以有很多，例如时序数据库，分布式缓存等等。

当然，如果后续要发展为在个人页面也能看到所有关注的游戏或者人的动态，那么推特的架构方案是一个不错的选择，现在的方案也可以很好的过渡过去。

## 关于排行榜的设计

榜单分为列表和内容，列表是多个榜单的集合，内容是单个榜单的排名内容。

V1版本的榜单，每个榜单100个位置（所以也可以叫Top100），直接读取数据库。V1～V2之间会加入缓存，每隔20分钟或者1小时之类的频率刷新一次榜单。
V2开始榜单列表是动态的，同时榜单内容可以在后台添加当前榜单规则的DSL。

## 关于RESTful

通常情况下，GET返回200，POST都返回201，PUT和DELETE成功都返回204
